$("#install").click(function(){install()});$("#login").click(function(){login()});$("#logout").click(function(){logout()});$("#logout2").click(function(){logout()});$("#verify").click(function(){varifyuser()});$("#createuser").click(function(){createuser()});$("#update").click(function(){update()});$("#start_msg0").click(function(){start_msg()});$("#start_msg1").click(function(){start_msg()});$(".delete_user").click(function(){delete_users(this)});$("#adddept").click(function(){adddept()});$(".update_setting").click(function(){update_setting(this)});function varifyuser(){var h=$("#username").val();var g=$("#fname").val();var b=$("#lname").val();var c=$("#password").val();var d=$("#repassword").val();var a=$("#secret").val();var e=$("#dept").val();if(d!==c){alertify.alert("password not match");return false}if(e==""||a==""||d==""||c==""||b==""||g==""||h==""){alertify.alert("Please fill All Field");return false}var f={username:h,fname:g,lname:b,password:c,repassword:d,secret:a,dept:e,action:"verify"};$.ajax({url:purl+"/ajax/verify",type:"POST",data:f,success:function(j,k,i){window.location=purl+"/login"},error:function(i,k,j){console.log(data);console.log(k)}})}function login(){var c=$("#username").val();var b=$("#password").val();if(c==""){alertify.alert("User Name is Blank");return false}if(b==""){alertify.alert("Password Name is Blank");return false}var a={username:c,password:b,action:"login"};$.ajax({url:purl+"/ajax/login",type:"POST",data:a,success:function(e,f,d){if(e==="success"){alertify.alert("Reloding...");location.reload()}else{alertify.alert("Password and User Doesn't Exist")}},error:function(d,f,e){console.log(data);console.log(f)}})}function createuser(){var c=$("#first_name").val();var b=$("#last_name").val();var f=$("#user_name").val();var a=$("#secret").val();var e=$("#department").val();if(e==0){alertify.alert("Please Select department");return false}if((c=="")||(b=="")||(f=="")){alertify.alert("Fill All Field");return false}var d={first_name:c,last_name:b,user_name:f,secret:a,dept:e,action:"createuser",token:token};$.ajax({url:purl+"/ajax/createuser",type:"POST",data:d,success:function(h,j,g){var i=JSON.parse(h);if(isset(i.error)){$("#error").html(i.error);$("#error").show()}else{vlink=purl+"/login/verify/"+i.vlink;$("#verify_link").val(vlink);$("#verify_link").show()}},error:function(g,i,h){console.log(data);console.log(i)}})}function logout(){var a={token:token};$.ajax({url:purl+"/ajax/logout",type:"POST",data:a,success:function(c,d,b){location.reload()},error:function(b,d,c){console.log(data);console.log(d)}})}function update(){var a=$("#uname").val();var f=$("#fname").val();var b=$("#lname").val();var c=$("#password").val();var d=$("#repassword").val();var e={uname:a,fname:f,lname:b,password:c,repassword:d,action:"update",token:token};$.ajax({url:purl+"/ajax/update",type:"POST",data:e,success:function(h,j,g){var i=JSON.parse(h)},error:function(g,i,h){console.log(data);console.log(i)}})}function start_msg(){var a=[];$.each($("input[name='users']:checked"),function(){a.push($(this).val())});var b={users:a.join(","),action:"start_msg",token:token};$.ajax({url:purl+"/ajax/create_chat",type:"POST",data:b,success:function(d,f,c){var e=JSON.parse(d);window.location=purl+"/msgs/g/"+e.redirect_to},error:function(c,e,d){console.log(data);console.log(e)}})}function delete_users(c){var b=$(c).attr("user");var a={uname:b,action:"delete_users",token:token};$.ajax({url:purl+"/ajax/deleteuser",type:"POST",data:a,success:function(e,f,d){location.reload()},error:function(d,f,e){console.log(data);console.log(f)}})}function adddept(){var b=$("#dept").val();var c=$("#desc").val();if(b==""&&c==""){return false}var a={dept:b,desc:c,action:"adddept",token:token};$.ajax({url:purl+"/ajax/adddept",type:"POST",data:a,success:function(e,f,d){location.reload()},error:function(d,f,e){console.log(data);console.log(f)}})}function update_setting(e){var d=$(e).attr("settings");var c=d+"_value";var f=[];$.each($("input[name='"+c+"']"),function(){f.push($(this).val())});var b=[];$.each($("input[name='"+c+"']"),function(){b.push($(this).attr("key"))});var a=[b,f];var d={settings:a,action:"settings",token:token};$.ajax({url:purl+"/ajax/settings",type:"POST",data:d,success:function(h,i,g){location.reload()},error:function(g,i,h){console.log(data);console.log(i)}})}function install(){var f=$("#database").val();var g=$("#username").val();var d=$("#host").val();var b=$("#password").val();var c=$("#dbprefix").val();var a=$("#port").val();var e={database:f,username:g,password:b,host:d,port:a,dbprefix:c};console.log(e);if(f==""||g==""||d==""){return false}$("#proc").css("display","block");$.ajax({url:purl+"/ajax/install",type:"POST",data:e,success:function(i,j,h){location.reload()},error:function(h,j,i){console.log(data);console.log(j)}})};